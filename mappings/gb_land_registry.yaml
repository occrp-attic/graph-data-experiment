database: $DATAVAULT_DATABASE_URI
query: >
  SELECT * FROM gb_land_registry_overseas os
    LEFT JOIN gb_land_registry_proprietor pr ON pr."Title_Number" = os."Title_Number";
nodes:
  proprietor:
    label: Actor
    properties:
      name:
        column: Proprietor_Name
      fingerprint:
        column: Proprietor_Name
        transform: fingerprint
        key: true
  property:
    label: RealEstate
    properties:
      name:
        column: Title_Number
      description:
        column: Property_Address
      fingerprint:
        column: Title_Number
        key: true
      countryCode:
        literal: GB
  propertyAddress:
    label: Address
    properties:
      name:
        column: Property_Address
      fingerprint:
        column: Property_Address
        transform: addressfp
        key: true
      countryCode:
        literal: GB
  proprietorAddress:
    label: Address
    properties:
      name:
        column: Address_1
      fingerprint:
        column: Address_1
        transform: addressfp
        key: true
edges:
  - label: OWNED_BY
    source: property
    target: proprietor
    properties:
      tenure:
        column: Tenure
  - label: LOCATED_AT
    source: property
    target: propertyAddress
    properties:
      tenure:
        column: Tenure
  - label: LOCATED_AT
    source: proprietor
    target: proprietorAddress
    properties:
      tenure:
        column: Tenure
