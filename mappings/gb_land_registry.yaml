database: $DATAVAULT_DATABASE_URI
query: >
  SELECT * FROM gb_land_registry_overseas os
    LEFT JOIN gb_land_registry_proprietor pr ON pr."Title_Number" = os."Title_Number";
nodes:
  proprietor:
    label: Actor
    properties:
      actorName:
        column: Proprietor_Name
      fingerprint:
        column: Proprietor_Name
        transform: fingerprint
        key: true
  property:
    label: Asset
    properties:
      assetName:
        column: Title_Number
      fingerprint:
        column: Title_Number
        key: true
  propertyAddress:
    label: Address
    properties:
      address:
        column: Property_Address
      fingerprint:
        column: Property_Address
        transform: fingerprint
        key: true
  proprietorAddress:
    label: Address
    properties:
      address:
        column: Address_1
      fingerprint:
        column: Address_1
        transform: fingerprint
        key: true
  country:
    label: Country
    properties:
      countryCode:
        literal: GB
        key: true
edges:
  - label: OWNED_BY
    source: property
    target: proprietor
    properties:
      tenure:
        column: Tenure
  - label: LOCATED_AT
    source: property
    target: propertyAddress
    properties:
      tenure:
        column: Tenure
  - label: LOCATED_AT
    source: proprietor
    target: proprietorAddress
    properties:
      tenure:
        column: Tenure
  - label: LOCATED_IN
    source: property
    target: country
  - label: LOCATED_IN
    source: address
    target: country
